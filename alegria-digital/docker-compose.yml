version: '3'
services:
  api:
    image: viniciusks13/alegria-api:v4
    ports:
      - 8081:8081
  web-server:
    image: nginx:1.21.6
    ports:
      - 80:80
      - 443:443
    volumes:
      - "$HOME/www/iac-docker/nginx-webserver/nginx.conf:/etc/nginx/nginx.conf"
      - "$HOME/www/iac-docker/nginx-webserver/ssl:/etc/nginx/certs"
  jenkins:
    image: jenkins/jenkins:lts
    privileged: true
    user: root
    ports:
      - 8080:8080
      - 50000:50000
    container_name: jenkins
    volumes:
      - $HOME/www/data/jenkins_configuration:/var/jenkins_home
networks:
  default:
    external:
      name: alegria-digital_default